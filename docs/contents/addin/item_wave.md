# 🎉『アイテム波形』アドイン

音声アイテムのフレーム毎の音量をタイムラインアイテム内に表示します。

## 📷スクリーンショット

[<img width="800px" src
="https://github.com/hebiiro/anti.aviutl.ultimate.plugin/assets/96464759/6d1540b9-5968-4bf2-9ea7-d7d125ba2297">
](https://github.com/hebiiro/anti.aviutl.ultimate.plugin/assets/96464759/6d1540b9-5968-4bf2-9ea7-d7d125ba2297)

## 🚨注意事項

* 別途ffmpegを導入する必要があります。
* `アイテム名常時表示`アドインとは排他的になっているので、`アイテム名常時表示`を非アクティブに設定してください。
* aviutlの`オーディオ波形の表示`にチェックが入っていない場合は、一旦再生しないと波形が生成されません。

## 🚀ffmpegの導入方法

1. 下記URLから`ffmpeg-{/}-win64-lgpl-shared-7.1.zip`をダウンロードします。
	* https://github.com/BtbN/FFmpeg-Builds/releases
	* `{/}`の部分はビルドバージョンによって異なります。
	* 例えば、[`ffmpeg-n7.1.1-10-gc6c20e04cc-win64-lgpl-shared-7.1.zip`](https://github.com/BtbN/FFmpeg-Builds/releases/download/autobuild-2025-05-11-13-41/ffmpeg-n7.1.1-10-gc6c20e04cc-win64-lgpl-shared-7.1.zip)
1. zipファイル内にある`bin`フォルダ内のファイルを`plugins/ultimate/module/x64`フォルダにコピーします。

## 🔧設定方法

1. aviutlウィンドウのメニューで`編集`➡`アルティメットプラグイン`➡`アイテム波形`を選択します。
1. `アイテム波形`ウィンドウが表示されます。

### 📝設定項目

* `描画サイズ` ✏️音量グラフの描画サイズを指定します。
* `更新モード` ✏️波形を更新する条件を指定します。
	* `更新しない` ✏️音声アイテムが編集されても音量グラフを更新しません。
	* `更新する` ✏️音声アイテムが編集されたとき音量グラフを更新します。
	* `再生中は更新しない` ✏️音声アイテムが編集されても再生中の場合は音量グラフを更新しません。
* `表示タイプ` ✏️音量グラフの表示タイプを指定します。
	* `中央` ✏️音量グラフを中央から上下に描画します。
	* `下` ✏️音量グラフを下から上に描画します。
	* `上` ✏️音量グラフを上から下に描画します。
* `描画モード` ✏️音量グラフの表示タイプを指定します。
	* `通常` ✏️音量グラフを通常通り描画します。
	* `XOR` ✏️音量グラフをXORで描画します。
	* `NotXOR` ✏️音量グラフをNotXORで描画します。
	* `Not` ✏️音量グラフをNotで描画します。
* `音量モード` ✏️音量の算出方式を指定します。既存のグラフに反映させたい場合は一旦`キャッシュをクリア`を実行してグラフをリセットしてください。
	* `ピーク` ✏️各サンプルの絶対値→最大値を算出して音量とします。
	* `RMS` ✏️各サンプルの二乗→平均→平方根を算出して音量とします。
* `対象レイヤー`
	* ✏️波形生成の対象となるレイヤーです。
	* ✏️カンマ区切りで複数指定できます。
	* ✏️例えば`2, 4`と指定すると、Layer 2とLayer 4に配置されている音声ファイルアイテムのみ波形が生成されます。
* `除外レイヤー`
	* ✏️波形生成の対象から除外されるレイヤーです。
	* ✏️カンマ区切りで複数指定できます。
	* ✏️例えば`2, 4`と指定すると、Layer 2とLayer 4に配置されている音声ファイルアイテムの波形が生成されなくなります。
* `対象フォルダ`
	* ✏️波形生成の対象となるフォルダです。
	* ✏️サブフォルダも対象となります。
	* ✏️例えば`C:\`と指定すると、Cドライブ内の音声ファイルのみ波形が生成されます。
* `除外フォルダ`
	* ✏️波形生成の対象から除外されるフォルダです。
	* ✏️サブフォルダも除外されます。
	* ✏️例えば`C:\`と指定すると、Cドライブ内の音声ファイルは波形が生成されなくなります。
* `音声波形を表示` ✏️チェックを入れると音量グラフが表示されます。
* `テキストを表示` ✏️チェックを入れるとアイテム名が表示されます。
* `テキストをスクロールしない` ✏️チェックを入れるとアイテム名が常時表示されます。
* `テキストより後ろに描画` ✏️チェックを入れると音量グラフがアイテム名より後ろに描画されます。
* `アイテム名オフセット` ✏️`アイテム名常時表示`中のアイテム名座標に加算するオフセットを指定します。
* `最大スレッド数` ✏️音量を算出するスレッド(サブプロセス)の最大同時稼働数を指定します。
* `キャッシュをクリア` ✏️音量グラフデータをすべて削除します。
* `ペンの色を選択` ✏️音量グラフの縁の色です。
* `ブラシの色を選択` ✏️音量グラフの塗りつぶし色です。
